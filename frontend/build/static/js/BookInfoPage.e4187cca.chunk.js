"use strict";(self.webpackChunkaudiobook=self.webpackChunkaudiobook||[]).push([[807],{3088:function(n,e,t){t.d(e,{P:function(){return c}});var r=t(4165),s=t(5861),i=t(713);function c(n,e){return a.apply(this,arguments)}function a(){return(a=(0,s.Z)((0,r.Z)().mark((function n(e,t){var s,c,a,o,u,l,d,f,x;return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return(s=document.createElement("span")).classList.add("show-message-block"),s.innerHTML=t,document.body.appendChild(s),c=e.clientY,a=e.pageY,o=a-c,u=e.clientX,l=window.innerHeight,d=window.innerWidth,f=s.clientHeight,x=s.clientWidth,s.style.left="".concat(u-10>x?u-10-x:d-10-u>x?u+10:10,"px"),s.style.top="".concat(l-10-c-80>f?10+c+o:c-10>f?c-10-f+o:10+o,"px"),n.next=16,(0,i._)(200);case 16:return s.classList.add("opacity"),n.next=19,(0,i._)(500);case 19:s.remove();case 20:case"end":return n.stop()}}),n)})))).apply(this,arguments)}},5541:function(n,e,t){t.r(e),t.d(e,{default:function(){return _}});var r=t(4165),s=t(5861),i=t(885),c=t(2791),a=t(7689),o=t(1087),u=t(1490);function l(n,e){return d.apply(this,arguments)}function d(){return(d=(0,s.Z)((0,r.Z)().mark((function n(e,t){var s,i,c;return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,s=u.W+"/api/getbookdata/".concat(e),n.next=4,fetch(s,{method:"GET",headers:{Authorization:t}});case 4:return i=n.sent,n.next=7,i.json();case 7:return c=n.sent,n.abrupt("return",c);case 11:return n.prev=11,n.t0=n.catch(0),n.abrupt("return","error");case 14:case"end":return n.stop()}}),n,null,[[0,11]])})))).apply(this,arguments)}var f=t(3417),x=t(9422),m=t(5027);function v(n){var e=new Date(n),t=e.getFullYear(),r=e.getDate(),s=e.getMonth();return"".concat(r," ").concat(["\u044f\u043d\u0432\u0430\u0440\u044f","\u0444\u0435\u0432\u0440\u0430\u043b\u044f","\u043c\u0430\u0440\u0442\u0430","\u0430\u043f\u0440\u0435\u043b\u044f","\u043c\u0430\u044f","\u0438\u044e\u043d\u044f","\u0438\u044e\u043b\u044f","\u0430\u0432\u0433\u0443\u0441\u0442\u0430","\u0441\u0435\u043d\u0442\u044f\u0431\u0440\u044f","\u043e\u043a\u0442\u044f\u0431\u0440\u044f","\u043d\u043e\u044f\u0431\u0440\u044f","\u0434\u0435\u043a\u0430\u0431\u0440\u044f"][s]," ").concat(t,"\u0433")}var h=t(184);function j(n){var e=n.text,t=n.username,r=n.date,s=(0,m.TL)(),i=(0,m.CG)((function(n){return n.bookinfo._id})),c=(0,m.CG)((function(n){return n.user.userName})),a=(0,m.CG)((function(n){return n.user.userstatus}));return(0,h.jsxs)("div",{className:"comment-comp",children:[(0,h.jsxs)("div",{className:"headline",children:[(0,h.jsx)("span",{children:t}),(0,h.jsx)("span",{children:v(r)}),c===t||"admin"===a||"editor"===a?(0,h.jsx)("span",{onClick:function(){s((0,x.lC)({_id:i,comm:n}))},children:"\u0443\u0434\u0430\u043b\u0438\u0442\u044c"}):(0,h.jsx)(h.Fragment,{})]}),(0,h.jsx)("p",{className:"",children:e})]})}function p(){var n=(0,m.CG)((function(n){return n.bookinfo.comments})),e=n&&n.map((function(n,e){return(0,h.jsx)(j,{username:n.username,date:n.date,text:n.text},e)}));return(0,h.jsxs)("div",{className:"array-comments",children:[n&&n.length>0?(0,h.jsx)("div",{className:"space"}):(0,h.jsx)(h.Fragment,{}),null===e||void 0===e?void 0:e.reverse()]})}var k=t(653),b=t(3088);function g(){var n=(0,m.CG)((function(n){return n.user.isAuth})),e=(0,m.CG)((function(n){return n.user.userName})),t=(0,m.CG)((function(n){return n.bookinfo._id})),r=(0,m.TL)(),s=(0,c.useState)(""),a=(0,i.Z)(s,2),o=a[0],u=a[1];return(0,h.jsxs)("div",{className:"input",children:[(0,h.jsx)("input",{type:"text",placeholder:"\u0432\u0430\u0448 \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439",value:o,onChange:function(n){return n.target.value.length>300?{}:u(n.target.value)}}),(0,h.jsx)("div",{className:"button",onClick:function(s){if(!n)return r((0,k.PE)(!0));if(o.length<10)return(0,b.P)(s,"\u043d\u0430\u043f\u0438\u0448\u0438\u0442\u0435 \u0445\u043e\u0442\u044f\u0431\u044b 10 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432");var i={username:e,date:Date.now(),text:o};u(""),r((0,x.b8)({_id:t,comm:i}))},children:"\u043e\u0441\u0442\u0430\u0432\u0438\u0442\u044c"}),(0,h.jsxs)("p",{children:[o.length,"/300"]})]})}function N(){var n=(0,m.CG)((function(n){return n.bookinfo.comments?n.bookinfo.comments.length:0}));return(0,h.jsxs)("div",{className:"comments",children:[(0,h.jsxs)("h2",{children:["\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438 ",(0,h.jsx)("span",{children:n})]}),(0,h.jsx)(g,{}),(0,h.jsx)(p,{})]})}function C(){var n=(0,m.CG)((function(n){return n.bookinfo._id})),e=(0,m.CG)((function(n){return n.bookinfo.like})),t=(0,m.CG)((function(n){return n.user.isAuth})),r=(0,m.TL)();return(0,h.jsx)("div",{onClick:function(s){if(!t)return(0,b.P)(s,"\u0430\u0432\u0442\u043e\u0440\u0438\u0437\u0443\u0439\u0442\u0435\u0441\u044c");r((0,x.AH)({_id:n,like:!e}))},className:"heart-icon ".concat(e?"active":"")})}function G(){var n=(0,m.CG)((function(n){return n.bookinfo._id})),e=(0,m.CG)((function(n){return n.bookinfo.reiting})),t=(0,m.CG)((function(n){return n.bookinfo.userreiting})),r=(0,m.CG)((function(n){return n.user.isAuth})),s=(0,m.TL)(),a=(0,c.useState)(!1),o=(0,i.Z)(a,2),u=o[0],l=o[1],d=(0,c.useState)(0),f=(0,i.Z)(d,2),v=f[0],j=f[1];function p(n){return u?v>=n:!!(t&&t>=n)}return(0,h.jsxs)("div",{className:"reiting-starts-box",children:[(0,h.jsxs)("div",{className:"box-fon",children:[(0,h.jsx)("div",{}),(0,h.jsx)("div",{}),(0,h.jsx)("div",{}),(0,h.jsx)("div",{}),(0,h.jsx)("div",{})]}),(0,h.jsx)("div",{className:"box-fon2",style:{width:"".concat(e/5*100,"%")},children:(0,h.jsxs)("div",{className:"box-fon",children:[(0,h.jsx)("div",{}),(0,h.jsx)("div",{}),(0,h.jsx)("div",{}),(0,h.jsx)("div",{}),(0,h.jsx)("div",{})]})}),(0,h.jsxs)("div",{className:"box-fon3",onClick:function(e){if(l(!1),!r)return(0,b.P)(e,"\u0430\u0432\u0442\u043e\u0440\u0438\u0437\u0443\u0439\u0442\u0435\u0441\u044c");var t=e.currentTarget.getBoundingClientRect().left,i=e.clientX,c=Math.ceil((i-t)/e.currentTarget.clientWidth*5);s((0,x.TU)({_id:n,reit:c}))},onMouseMove:function(n){l(!0);var e=n.currentTarget.getBoundingClientRect().left,t=n.clientX,r=Math.ceil((t-e)/n.currentTarget.clientWidth*5);j(r)},onMouseLeave:function(){l(!1),j(0)},children:[(0,h.jsx)("div",{className:"".concat(p(1)?"active":"")}),(0,h.jsx)("div",{className:"".concat(p(2)?"active":"")}),(0,h.jsx)("div",{className:"".concat(p(3)?"active":"")}),(0,h.jsx)("div",{className:"".concat(p(4)?"active":"")}),(0,h.jsx)("div",{className:"".concat(p(5)?"active":"")})]})]})}function w(){var n=(0,m.CG)((function(n){return n.bookinfo})).name;return(0,h.jsxs)("div",{className:"line1",children:[(0,h.jsx)("span",{className:"bookname",children:n}),(0,h.jsx)(C,{}),(0,h.jsx)(G,{})]})}function y(){var n=(0,m.CG)((function(n){return n.bookinfo.description})),e=(0,m.CG)((function(n){return n.bookinfo.image})),t=(0,a.UO)().bookname;return(0,h.jsxs)("div",{className:"line2",children:[(0,h.jsx)("div",{className:"image",style:{backgroundImage:"url(".concat(e,")")},children:(0,h.jsx)("div",{className:"fon",children:(0,h.jsx)("div",{className:"play-button",children:(0,h.jsx)(o.rU,{to:"/listen/".concat(t)})})})}),n,(0,h.jsx)("div",{className:"endline"})]})}function T(){var n=(0,m.CG)((function(n){return n.bookinfo.authtor})),e=(0,m.CG)((function(n){return n.bookinfo.bookcount})),t=(0,m.CG)((function(n){return n.user.userstatus})),r=(0,m.CG)((function(n){return n.bookinfo.progress})),s=(0,a.s0)(),i=(0,a.UO)().bookname;return(0,h.jsxs)("div",{className:"line3",children:[(0,h.jsx)("span",{children:n}),(0,h.jsxs)("span",{className:"bookcount",children:[" ",e,(0,h.jsx)("div",{className:"book-icon"})]}),r?(0,h.jsxs)("span",{className:"progress",children:["\u041f\u0440\u043e\u0441\u043b\u0443\u0448\u0430\u043d\u043e ",(100*r).toFixed(1),"%"]}):(0,h.jsx)(h.Fragment,{}),"editor"===t||"admin"===t?(0,h.jsx)("span",{className:"ToEdit",onClick:function(){return s("/edit/".concat(i))},children:"\u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"}):(0,h.jsx)(h.Fragment,{})]})}function Z(){return(0,h.jsxs)("div",{className:"blurfix",children:[(0,h.jsx)("div",{className:"fonblur"}),(0,h.jsxs)("div",{className:"info-conteiner",children:[(0,h.jsx)(w,{}),(0,h.jsx)(y,{}),(0,h.jsx)(T,{}),(0,h.jsx)(N,{})]})]})}function _(){var n=(0,a.UO)().bookname,e=(0,a.s0)(),t=(0,m.TL)(),u=(0,m.CG)((function(n){return n.user.token})),d=(0,c.useState)(!1),v=(0,i.Z)(d,2),j=v[0],p=v[1];return(0,c.useEffect)((function(){function i(){return(i=(0,s.Z)((0,r.Z)().mark((function s(){var i;return(0,r.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,l(n,u);case 3:"error"!==(i=r.sent)?(t((0,x.hq)(i)),p(!0)):e("/404page"),r.next=10;break;case 7:r.prev=7,r.t0=r.catch(0),e("/404page");case 10:case"end":return r.stop()}}),s,null,[[0,7]])})))).apply(this,arguments)}!function(){i.apply(this,arguments)}()}),[u]),(0,h.jsx)("div",{className:"info-page",children:j?(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("p",{className:"audiobook-link",children:(0,h.jsx)(o.rU,{to:"/",children:"Audiobooks"})}),(0,h.jsx)(Z,{})]}):(0,h.jsx)(f.a,{})})}}}]);
//# sourceMappingURL=BookInfoPage.e4187cca.chunk.js.map