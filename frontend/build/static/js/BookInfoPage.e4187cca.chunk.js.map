{"version":3,"file":"static/js/BookInfoPage.e4187cca.chunk.js","mappings":"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","sources":["Utils/other/showMessage/showMessahe.ts","api/getbookdata.ts","Utils/other/DateToString.ts","pages/BookInfoPage/InfoConteiner/Comments/CommentBlock/CommentBlock.tsx","pages/BookInfoPage/InfoConteiner/Comments/ArrayComments/ArrayComments.tsx","pages/BookInfoPage/InfoConteiner/Comments/CommentInput/CommentInput.tsx","pages/BookInfoPage/InfoConteiner/Comments/Comments.tsx","pages/BookInfoPage/InfoConteiner/Line1/BookHeart/BookHeart.tsx","pages/BookInfoPage/InfoConteiner/Line1/reitStars/ReitingStars.tsx","pages/BookInfoPage/InfoConteiner/Line1/Line1.tsx","pages/BookInfoPage/InfoConteiner/Line2/Line2.tsx","pages/BookInfoPage/InfoConteiner/Line3/Line3.tsx","pages/BookInfoPage/InfoConteiner/InfoConteiner.tsx","pages/BookInfoPage/BookInfoPage.tsx"],"sourcesContent":["import { sleep } from \"../sleep\";\r\nimport './style.scss';\r\n\r\nexport async function showMessage(event:React.MouseEvent,message:string){\r\n    let span = document.createElement('span');\r\n    span.classList.add('show-message-block');\r\n    span.innerHTML=message;\r\n    document.body.appendChild(span);\r\n    //\r\n    let Y = event.clientY;\r\n    let pageY = event.pageY;\r\n    let delta = pageY-Y;\r\n\r\n    let X = event.clientX;\r\n    let winH = window.innerHeight;\r\n    let winW = window.innerWidth;\r\n    let spanH=span.clientHeight;\r\n    let spanW=span.clientWidth;\r\n\r\n    if ((X-10)>spanW){\r\n        span.style.left=`${X-10-spanW}px`;\r\n    }else if ((winW-10-X)>spanW){\r\n        span.style.left=`${X+10}px`;\r\n    }else{\r\n        span.style.left=`${10}px`;\r\n    }\r\n\r\n    if ((winH-10-Y-80)>spanH){\r\n        span.style.top =`${10+Y+delta}px`;\r\n    }else if ((Y-10)>spanH){\r\n        span.style.top =`${Y-10-spanH+delta}px`;\r\n    }else{\r\n        span.style.top =`${10+delta}px`;\r\n    }\r\n    //\r\n    await sleep(200);\r\n    span.classList.add('opacity');\r\n    await sleep(500);\r\n    span.remove();\r\n}","import { fetchImage } from \"../types/api\";\r\nimport { adress } from \"./apiAdress\";\r\n\r\nexport type FetchComment={\r\n    date:number;\r\n    text:string;\r\n    username:string;\r\n}\r\n\r\nexport type BookData = {\r\n    _id:string;\r\n    Reiting:number;\r\n    authtorname:string;\r\n    bookcount:number;\r\n    comments:FetchComment[];\r\n    description:string;\r\n    href:string;\r\n    image:fetchImage;\r\n    name:string;\r\n    like?:boolean;\r\n    userReiting?:number;\r\n    progress?:number;\r\n}\r\n\r\nexport async function getBookData(href:string,token:string):Promise<BookData|'error'>{\r\n    try{\r\n        let apiadress=adress+`/api/getbookdata/${href}`;\r\n        let res = await fetch(apiadress,{\r\n            method: 'GET',\r\n            headers: {\r\n                'Authorization': token,\r\n            },\r\n        });\r\n        let json:BookData = await res.json();\r\n        return json;\r\n    }catch{\r\n        return 'error'\r\n    }\r\n}","export function DateToString(stump:number):string{\r\n    let date = new Date(stump);\r\n\r\n    let year = date.getFullYear();\r\n    let day = date.getDate();\r\n    let month = date.getMonth();\r\n\r\n    let montharr = [\r\n        'января',\r\n        'февраля',\r\n        'марта',\r\n        'апреля',\r\n        'мая',\r\n        'июня',\r\n        'июля',\r\n        'августа',\r\n        'сентября',\r\n        'октября',\r\n        'ноября',\r\n        'декабря',\r\n    ]\r\n\r\n    return `${day} ${montharr[month]} ${year}г`\r\n}","import { FetchComment } from '../../../../../api/getbookdata';\r\nimport { userRemoveComment } from '../../../../../redux/slices/BookInfoSlice';\r\nimport { useAppDispatch, useAppSelector } from '../../../../../redux/store';\r\nimport { DateToString } from '../../../../../Utils/other/DateToString';\r\nimport './style.scss';\r\n\r\nexport function CommentBlock(props:FetchComment){\r\n    let {text,username,date} = props;\r\n    let dispatch = useAppDispatch();\r\n\r\n    let _id = useAppSelector((state)=>state.bookinfo._id);\r\n    let nameUser = useAppSelector((state)=>state.user.userName);\r\n    let status = useAppSelector((state)=>state.user.userstatus);\r\n\r\n    function clickDelete(){\r\n        dispatch(userRemoveComment({_id,comm:props}));\r\n    }\r\n\r\n    return <div className=\"comment-comp\">\r\n        <div className='headline'>\r\n            <span>{username}</span>\r\n            <span>{DateToString(date)}</span>\r\n            {(nameUser===username || status==='admin' || status==='editor')?\r\n                <span onClick={clickDelete}>удалить</span>\r\n            :<></>}\r\n        </div>\r\n        <p className=''>\r\n            {text}\r\n        </p>\r\n    </div>\r\n}\r\n","import { useAppSelector } from '../../../../../redux/store';\r\nimport { CommentBlock } from '../CommentBlock/CommentBlock';\r\nimport './style.scss';\r\n\r\n\r\nexport function ArrayComments(){\r\n    let comments = useAppSelector((state)=>state.bookinfo.comments);\r\n\r\n\r\n    let commsBloks = comments && comments.map((comm,i)=>{\r\n        return <CommentBlock\r\n            username={comm.username}\r\n            date={comm.date}\r\n            text={comm.text}\r\n\r\n            key={i}\r\n        />\r\n    })\r\n\r\n    return <div className=\"array-comments\">\r\n        {(comments && comments.length>0)?<div className='space'></div>:<></>}\r\n        {commsBloks?.reverse()}\r\n    </div>\r\n}","import { useState } from \"react\";\r\nimport { FetchComment } from \"../../../../../api/getbookdata\";\r\nimport { userAddComment } from \"../../../../../redux/slices/BookInfoSlice\";\r\nimport { showhidemodal } from \"../../../../../redux/slices/userSlice\";\r\nimport { useAppDispatch, useAppSelector } from \"../../../../../redux/store\";\r\nimport { showMessage } from \"../../../../../Utils/other/showMessage/showMessahe\";\r\n\r\nexport function CommentInput(){\r\n    let isAuth = useAppSelector((state)=>state.user.isAuth);\r\n    let userName = useAppSelector((state)=>state.user.userName);\r\n    let _id = useAppSelector((state)=>state.bookinfo._id);\r\n    let dispatch = useAppDispatch();\r\n\r\n    let [comment,setcomment]=useState('');\r\n\r\n    function onclickbutton(event:React.MouseEvent){\r\n        if (!isAuth) return dispatch(showhidemodal(true));\r\n        if (comment.length<10) return showMessage(event,'напишите хотябы 10 символов');\r\n\r\n        let payload: FetchComment = {\r\n            username:userName,\r\n            date:Date.now(),\r\n            text:comment,\r\n        }\r\n        setcomment('');//\r\n        dispatch(userAddComment({_id,comm:payload}))\r\n    }\r\n\r\n    return <div className=\"input\">\r\n    <input type=\"text\"\r\n    placeholder=\"ваш комментарий\" \r\n    value={comment} \r\n    onChange={(event)=>event.target.value.length>300?{}:setcomment(event.target.value)}/>\r\n    <div className='button' onClick={onclickbutton}>\r\n        оставить\r\n    </div>\r\n    <p>{comment.length}/300</p>\r\n</div>\r\n}","import { useAppSelector } from \"../../../../redux/store\";\r\nimport { ArrayComments } from \"./ArrayComments/ArrayComments\";\r\nimport { CommentInput } from \"./CommentInput/CommentInput\";\r\n\r\nexport function Comments(){\r\n    let count = useAppSelector((state)=>state.bookinfo.comments?state.bookinfo.comments.length:0);\r\n\r\n    return <div className='comments'>\r\n        <h2>Комментарии <span>{count}</span></h2>\r\n        <CommentInput/>\r\n        <ArrayComments/>\r\n    </div>\r\n}","import React from \"react\";\r\nimport { userSetLike } from \"../../../../../redux/slices/BookInfoSlice\";\r\nimport { useAppDispatch, useAppSelector } from \"../../../../../redux/store\"\r\nimport { showMessage } from \"../../../../../Utils/other/showMessage/showMessahe\";\r\n\r\nexport function BookHeart(){\r\n    let _id = useAppSelector((state)=>state.bookinfo._id);\r\n    let like = useAppSelector((state)=>state.bookinfo.like);\r\n    let isAuth = useAppSelector((state)=>state.user.isAuth);\r\n\r\n    let dispatch = useAppDispatch();\r\n\r\n    function onclick(event:React.MouseEvent){\r\n        if (!isAuth) return showMessage(event,'авторизуйтесь');\r\n        dispatch(userSetLike({_id,like:!like}));\r\n    }\r\n\r\n    return <div\r\n    onClick={onclick}\r\n     className={`heart-icon ${like?'active':''}`}>\r\n    </div>\r\n}","import { useState } from 'react';\r\nimport { setUserReiting, userSelectReiting } from '../../../../../redux/slices/BookInfoSlice';\r\nimport { useAppDispatch, useAppSelector } from '../../../../../redux/store';\r\nimport { showMessage } from '../../../../../Utils/other/showMessage/showMessahe';\r\nimport './style.scss';\r\n\r\n\r\n\r\nexport function ReitingStarts(){\r\n    let _id = useAppSelector((state)=>state.bookinfo._id);\r\n    let reiting = useAppSelector((state)=>state.bookinfo.reiting);\r\n    let userreiting = useAppSelector((state)=>state.bookinfo.userreiting);\r\n    let isAuth = useAppSelector((state)=>state.user.isAuth);\r\n\r\n    let dispatch = useAppDispatch();\r\n\r\n    let [hover,sethover] = useState(false);\r\n    let [hoverreiting,sethoverreiting] = useState(0);\r\n\r\n    function onclick(event:React.MouseEvent){\r\n        sethover(false);\r\n\r\n        if (!isAuth) return showMessage(event,'авторизуйтесь');\r\n\r\n        let {left} = event.currentTarget.getBoundingClientRect();\r\n        let X = event.clientX;\r\n        let cense= Math.ceil((X-left)/event.currentTarget.clientWidth*5);\r\n        dispatch(userSelectReiting({_id,reit:cense}));\r\n    }\r\n    function mouseleave(){\r\n        sethover(false);\r\n        sethoverreiting(0);\r\n    }\r\n    function mousemove(event:React.MouseEvent){\r\n        sethover(true);\r\n\r\n        let {left} = event.currentTarget.getBoundingClientRect();\r\n        let X = event.clientX;\r\n        let cense= Math.ceil((X-left)/event.currentTarget.clientWidth*5);\r\n        sethoverreiting(cense);\r\n    }\r\n    function checshow(num:number){\r\n        if (hover){\r\n            if (hoverreiting>=num) return true;\r\n            return false;\r\n        }\r\n        if (userreiting && userreiting>=num) return true;\r\n        return false;\r\n    }\r\n\r\n    return <div className=\"reiting-starts-box\">\r\n        <div className='box-fon'>\r\n            <div></div>\r\n            <div></div>\r\n            <div></div>\r\n            <div></div>\r\n            <div></div>\r\n        </div>\r\n        <div className='box-fon2' style={{width:`${(reiting/5)*100}%`}}>\r\n            <div className='box-fon'>\r\n                <div></div>\r\n                <div></div>\r\n                <div></div>\r\n                <div></div>\r\n                <div></div>\r\n            </div>\r\n        </div>\r\n        <div className='box-fon3'\r\n            onClick={onclick}\r\n            onMouseMove={mousemove}\r\n            onMouseLeave={mouseleave}\r\n            >\r\n\r\n            <div className={`${checshow(1)?'active':''}`}></div>\r\n            <div className={`${checshow(2)?'active':''}`}></div>\r\n            <div className={`${checshow(3)?'active':''}`}></div>\r\n            <div className={`${checshow(4)?'active':''}`}></div>\r\n            <div className={`${checshow(5)?'active':''}`}></div>\r\n        </div>\r\n    </div>\r\n}","import { useAppSelector } from \"../../../../redux/store\";\r\nimport { BookHeart } from \"./BookHeart/BookHeart\";\r\nimport { ReitingStarts } from \"./reitStars/ReitingStars\";\r\n\r\nexport function Line1(){\r\n    let {name} = useAppSelector((state)=>state.bookinfo)\r\n\r\n    return <div className='line1'>\r\n        <span className='bookname'>{name}</span>\r\n        <BookHeart/>\r\n        <ReitingStarts/>\r\n    </div>\r\n}","import { Link, useParams } from \"react-router-dom\"\r\nimport { useAppSelector } from \"../../../../redux/store\"\r\n\r\nexport function Line2(){\r\n    let description = useAppSelector((state)=>state.bookinfo.description);\r\n    let image = useAppSelector((state)=>state.bookinfo.image);\r\n    let {bookname}=useParams();\r\n\r\n    return <div className='line2'>\r\n        <div className='image' style={{backgroundImage:`url(${image})`}}>\r\n            <div className=\"fon\">\r\n                <div className=\"play-button\">\r\n                    <Link to={`/listen/${bookname}`}></Link>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        {description}\r\n        <div className='endline'></div>\r\n    </div>\r\n}","import { useNavigate, useParams } from \"react-router-dom\";\r\nimport { useAppSelector } from \"../../../../redux/store\"\r\n\r\nexport function Line3(){\r\n    let authtor = useAppSelector((state)=>state.bookinfo.authtor);\r\n    let bookcount = useAppSelector((state)=>state.bookinfo.bookcount);\r\n    let status = useAppSelector((state)=>state.user.userstatus);\r\n    let progress = useAppSelector((state)=>state.bookinfo.progress);\r\n\r\n    let navigate = useNavigate();\r\n    let {bookname}=useParams();\r\n\r\n    return <div className='line3'>\r\n        <span>{authtor}</span>\r\n        <span className='bookcount'> {bookcount} \r\n            <div className=\"book-icon\"></div>\r\n        </span>\r\n        {progress?<span className=\"progress\">Прослушано {(progress*100).toFixed(1)}%</span>:<></>}\r\n        {(status==='editor'||status==='admin')?\r\n            <span className='ToEdit'\r\n            onClick={()=>navigate(`/edit/${bookname}`)}>редактировать</span>\r\n        :<></>}\r\n    </div>\r\n}","import { Comments } from './Comments/Comments';\r\nimport { Line1 } from './Line1/Line1';\r\nimport { Line2 } from './Line2/Line2';\r\nimport { Line3 } from './Line3/Line3';\r\nimport './style.scss';\r\n\r\nexport function InfoConteiner(){\r\n    return <div className='blurfix'>\r\n        <div className=\"fonblur\"></div>\r\n        <div className='info-conteiner'>\r\n            <Line1/>\r\n            <Line2/>\r\n            <Line3/>\r\n            <Comments/>\r\n        </div>\r\n    </div>\r\n}","import { useEffect, useState } from 'react';\r\nimport { Link, useNavigate, useParams } from 'react-router-dom';\r\nimport { getBookData } from '../../api/getbookdata';\r\nimport { Loader } from '../../components/Loader/Loader';\r\nimport { setInfoState } from '../../redux/slices/BookInfoSlice';\r\nimport { RootState, useAppDispatch, useAppSelector } from '../../redux/store';\r\nimport { InfoConteiner } from './InfoConteiner/InfoConteiner';\r\nimport './style.scss';\r\n\r\n\r\nexport default function BookInfoPage(){\r\n    let {bookname}=useParams();\r\n    let navigate = useNavigate();\r\n    let dispatch = useAppDispatch();\r\n\r\n    let token = useAppSelector((state:RootState)=>state.user.token);\r\n    let[loadend,setloadend]= useState(false);\r\n\r\n    useEffect(()=>{\r\n        onload()\r\n        async function onload(){\r\n            try{\r\n                let data = await getBookData(bookname!,token);\r\n                if (data!=='error'){\r\n                    dispatch(setInfoState(data))\r\n                    setloadend(true);\r\n                }else{\r\n                    navigate('/404page');\r\n                }\r\n            }catch{\r\n                navigate('/404page')\r\n            }\r\n        }\r\n    },[token]);\r\n\r\n    return <div className=\"info-page\">\r\n        {loadend?\r\n        <>\r\n            <p className='audiobook-link'>\r\n                <Link to='/'>Audiobooks</Link>\r\n            </p>\r\n            <InfoConteiner/>\r\n        </>\r\n        :<Loader/>}\r\n    </div>\r\n}"],"names":["showMessage","event","message","span","document","createElement","classList","add","innerHTML","body","appendChild","Y","clientY","pageY","delta","X","clientX","winH","window","innerHeight","winW","innerWidth","spanH","clientHeight","spanW","clientWidth","style","left","top","sleep","remove","getBookData","href","token","apiadress","adress","fetch","method","headers","res","json","DateToString","stump","date","Date","year","getFullYear","day","getDate","month","getMonth","CommentBlock","props","text","username","dispatch","useAppDispatch","_id","useAppSelector","state","bookinfo","nameUser","user","userName","status","userstatus","className","onClick","userRemoveComment","comm","ArrayComments","comments","commsBloks","map","i","length","reverse","CommentInput","isAuth","useState","comment","setcomment","type","placeholder","value","onChange","target","showhidemodal","payload","now","userAddComment","Comments","count","BookHeart","like","userSetLike","ReitingStarts","reiting","userreiting","hover","sethover","hoverreiting","sethoverreiting","checshow","num","width","currentTarget","getBoundingClientRect","cense","Math","ceil","userSelectReiting","reit","onMouseMove","onMouseLeave","Line1","name","Line2","description","image","bookname","useParams","backgroundImage","to","Line3","authtor","bookcount","progress","navigate","useNavigate","toFixed","InfoConteiner","BookInfoPage","loadend","setloadend","useEffect","data","setInfoState","onload","Loader"],"sourceRoot":""}