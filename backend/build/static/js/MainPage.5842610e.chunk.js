"use strict";(self.webpackChunkaudiobook=self.webpackChunkaudiobook||[]).push([[475],{3088:function(n,e,r){r.d(e,{P:function(){return s}});var t=r(4165),i=r(5861),a=r(713);function s(n,e){return c.apply(this,arguments)}function c(){return(c=(0,i.Z)((0,t.Z)().mark((function n(e,r){var i,s,c,o,u,l,d,h,f;return(0,t.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return(i=document.createElement("span")).classList.add("show-message-block"),i.innerHTML=r,document.body.appendChild(i),s=e.clientY,c=e.pageY,o=c-s,u=e.clientX,l=window.innerHeight,d=window.innerWidth,h=i.clientHeight,f=i.clientWidth,i.style.left="".concat(u-10>f?u-10-f:d-10-u>f?u+10:10,"px"),i.style.top="".concat(l-10-s-80>h?10+s+o:s-10>h?s-10-h+o:10+o,"px"),n.next=16,(0,a._)(200);case 16:return i.classList.add("opacity"),n.next=19,(0,a._)(500);case 19:i.remove();case 20:case"end":return n.stop()}}),n)})))).apply(this,arguments)}},5038:function(n,e,r){r.r(e),r.d(e,{default:function(){return A}});var t=r(2791),i=r(331),a=r(5027),s=r(885),c=r(3088),o=r(184);function u(n){var e=n.arrVariant,r=n.onChange,i=n.type,u=n.activevar,l=(0,t.useState)(!1),d=(0,s.Z)(l,2),h=d[0],f=d[1],x=!(0,a.CG)((function(n){return n.user.isAuth}))&&"filter"===i,m=e.map((function(n,e){var t=n===u;return(0,o.jsx)("div",{onClick:function(){h&&r(n)},className:"variant-line ".concat(t?"active":""),children:n},e)}));return(0,o.jsxs)("div",{onClick:function(n){x?(0,c.P)(n,"\u0430\u0432\u0442\u043e\u0440\u0438\u0437\u0443\u0439\u0442\u0435\u0441\u044c"):f(!h)},onMouseLeave:function(){return f(!1)},className:"filter-component ".concat(h?"open":""," ").concat(x?"block":""),style:{height:"".concat(31*e.length,"px")},children:[(0,o.jsx)("div",{className:"".concat(i,"-icon")}),m]})}var l=["\u0432\u0441\u0435","\u043b\u044e\u0431\u0438\u043c\u044b\u0435","\u0443\u0436\u0435 \u0441\u043b\u0443\u0448\u0430\u043b"],d=["\u0431\u0435\u0437 \u0441\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u043a\u0438","\u043f\u043e \u043f\u043e\u043f\u0443\u043b\u044f\u0440\u043d\u043e\u0441\u0442\u0438","\u043f\u043e \u0440\u0435\u0439\u0442\u0438\u043d\u0433\u0443"];function h(){var n=(0,a.CG)((function(n){return n.search.sortingParam})),e=(0,a.CG)((function(n){return n.search.filterParam})),r=(0,a.TL)();return(0,o.jsxs)("div",{className:"filter-block",children:[(0,o.jsx)("div",{className:"sorting-select",children:(0,o.jsx)(u,{activevar:n,type:"sorting",arrVariant:d,onChange:function(n){r((0,i.OS)(n))}})}),(0,o.jsx)("div",{className:"filter-select",children:(0,o.jsx)(u,{activevar:e,type:"filter",arrVariant:l,onChange:function(n){r((0,i.Tv)(n))}})})]})}var f=r(4165),x=r(5861),m=r(1490);function p(n,e,r,t){return v.apply(this,arguments)}function v(){return(v=(0,x.Z)((0,f.Z)().mark((function n(e,r,t,i){var a,s,c,o,u;return(0,f.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a=m.W+"/api/getbooks",n.prev=1,s={sorting:r,search:e,filter:t},n.next=5,fetch(a,{method:"POST",headers:{Authorization:i},body:JSON.stringify(s)});case 5:return c=n.sent,n.next=8,c.json();case 8:return o=n.sent,u=o.map((function(n){var e=n._id,r=n.authtorname,t=n.image,i=n.href,a=n.name,s=n.Reiting,c=n.like,o=n.progress;return{_id:e,href:i,img:t.url,authtor:r,name:a,reiting:s,like:c,progress:o}})),n.abrupt("return",u);case 13:return n.prev=13,n.t0=n.catch(1),n.abrupt("return","error");case 16:case"end":return n.stop()}}),n,null,[[1,13]])})))).apply(this,arguments)}var j=r(3417),g=r(9393),k=r(1087);function C(n){var e=(100*n.progress).toFixed();return(0,o.jsxs)("div",{className:"propress-line",children:[(0,o.jsxs)("span",{children:[e,"%"]}),(0,o.jsx)("div",{className:"light-line",style:{width:"".concat(e,"%")}})]})}function N(n){var e=n.like,r=n.onClick;return(0,o.jsx)("div",{onClick:r,className:"likebook-icon ".concat(e?"active":"")})}function b(n){var e=n.reit;return(0,o.jsxs)("span",{className:"cense",children:[e?e.toFixed(1):"?",(0,o.jsx)("div",{className:"start-icon"})]})}function y(n){var e=n.img,r=n.authtor,t=n.name,s=n.progress,u=n.href,l=n.reit,d=n.like,h=n.num,f=n._id,x=(0,a.TL)(),m=(0,a.CG)((function(n){return n.user.isAuth}));return(0,o.jsxs)("div",{className:"book-card ".concat(d?"like":""),children:[(0,o.jsx)("div",{className:"book-image book"}),(0,o.jsx)("div",{className:"book-image",style:{backgroundImage:"url(".concat(e,")")}}),(0,o.jsx)("h2",{children:t}),(0,o.jsx)("p",{children:r}),(0,o.jsx)(b,{reit:l}),(0,o.jsx)(N,{like:d||!1,onClick:function(n){n.stopPropagation(),m?x((0,i.nk)({_id:f,num:h,like:!d})):(0,c.P)(n,"\u0430\u0432\u0442\u043e\u0440\u0438\u0437\u0443\u0439\u0442\u0435\u0441\u044c")}}),s?(0,o.jsx)(C,{progress:s}):(0,o.jsx)(o.Fragment,{}),(0,o.jsx)(k.rU,{to:"/bookInfo/".concat(u)})]})}var w=(0,g.Pd)(1e3);function G(){var n=(0,a.TL)(),e=(0,a.CG)((function(n){return n.search.searchString})),r=(0,a.CG)((function(n){return n.search.sortingParam})),c=(0,a.CG)((function(n){return n.search.filterParam})),u=(0,a.CG)((function(n){return n.user.token})),l=(0,t.useState)(!1),d=(0,s.Z)(l,2),h=d[0],m=d[1];(0,t.useEffect)((function(){function t(){return(t=(0,x.Z)((0,f.Z)().mark((function t(){var a;return(0,f.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return m(!1),t.next=3,p(e,r,c,u);case 3:"error"!==(a=t.sent)?(m(!0),n((0,i.Hx)(a))):(m(!0),n((0,i.Hx)([])));case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}w((function(){return t.apply(this,arguments)}))}),[e,r,c,u]);var v=(0,a.CG)((function(n){return n.search.arrayCard}));return(0,o.jsx)(o.Fragment,{children:h?(0,o.jsx)(o.Fragment,{children:v.length>0?(0,o.jsx)("div",{className:"array-card-conteiner",children:v.map((function(n,e){return(0,o.jsx)(y,{_id:n._id,href:n.href,img:n.img,authtor:n.authtor,name:n.name,reit:n.reiting,like:n.like,progress:n.progress,num:e},e)}))}):(0,o.jsxs)("div",{className:"message",children:[(0,o.jsx)("span",{children:"\u0410\u0443\u0434\u0438\u043e\u043a\u043d\u0438\u0436\u043a\u0438 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u044b :("}),(0,o.jsx)("span",{children:"\u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u043d\u0435\u043c\u043d\u043e\u0433\u043e \u043f\u043e\u0437\u0436\u0435"})]})}):(0,o.jsx)(j.a,{})})}function P(){var n=(0,t.useRef)(null);return(0,o.jsxs)("div",{ref:n,className:"bookcard-box",children:[(0,o.jsx)(h,{}),(0,o.jsx)(G,{})]})}var Z=r(7689),_=r(653);function L(){var n=(0,a.TL)(),e=(0,Z.s0)(),r=(0,a.CG)((function(n){return n.search.searchString})),t=(0,a.CG)((function(n){return n.user.userstatus})),s=(0,a.CG)((function(n){return n.user.isAuth}));return(0,o.jsxs)("div",{className:"main-top-line",children:[(0,o.jsx)("p",{className:"textLogo",children:"Audiobooks"}),(0,o.jsxs)("div",{className:"line1",children:[(0,o.jsxs)("div",{className:"main-input",children:[(0,o.jsx)("input",{type:"text",value:r,onChange:function(e){return n((0,i.G_)(e.target.value))},placeholder:"\u0432\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0438\u043b\u0438 \u0430\u0432\u0442\u043e\u0440\u0430"}),(0,o.jsx)("div",{className:"input-icon"})]}),"admin"===t||"editor"===t?(0,o.jsxs)("div",{onClick:function(){e("/edit/newbook")},className:"addbook-icon",children:[(0,o.jsx)("div",{}),(0,o.jsx)("div",{})]}):(0,o.jsx)(o.Fragment,{}),(0,o.jsx)("div",{onClick:function(){s||n((0,_.PE)(!0))},className:"login-icon ".concat(s?"isAuth":""),children:s?(0,o.jsx)("div",{onClick:function(){n((0,_.GK)()),n((0,i.G_)("*")),n((0,i.oA)())},className:"exit-account",children:"\u0432\u044b\u0439\u0442\u0438"}):(0,o.jsx)(o.Fragment,{})})]})]})}function A(){return(0,o.jsxs)("div",{className:"MainPage",children:[(0,o.jsx)(L,{}),(0,o.jsx)(P,{})]})}}}]);
//# sourceMappingURL=MainPage.5842610e.chunk.js.map